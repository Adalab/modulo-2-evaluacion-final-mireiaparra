{"version":3,"sources":["0_querys.js","1_search.js","2_fav.js","3_localStorage.js","4_resetBtn.js","main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["\"use strict\";\nconst allList = document.querySelector(\".js-allCharactersList\");\nconst favList = document.querySelector(\".js-favCharactersList\");\nconst favSection = document.querySelector(\".js-favSection\");\nconst searchBtn = document.querySelector(\".js-searchBtn\");\nconst searchInput = document.querySelector(\".js-searchInput\");\nconst container = document.querySelector(\".js-main\");\n","\"use strict\";\nfunction handleClickSearch(ev) {\n  ev.preventDefault();\n\n  const searchCharactersName = characters.filter((eachCharacter) =>\n    eachCharacter.name.toLowerCase().includes(searchInput.value.toLowerCase())\n  );\n  const searchCharactersStatus = characters.filter((eachCharacter) =>\n    eachCharacter.status.toLowerCase().includes(searchInput.value.toLowerCase())\n  );\n\n  let filteredCharacters = searchCharactersName.concat(searchCharactersStatus);\n\n  // Encontrar el objeto de search que tenga el mismo char_id que mi elemento de favsList\n  // TODO: repasar == por ===\n\n  // const findSearch = characters.find((eachChar) => eachChar.char_id == parseInt(.id));\n  // console.log(findSearch);\n\n  allList.innerHTML = \"\";\n  paintCharacters(filteredCharacters, allList, \"characters__back\");\n  // filteredChildren es un HTMLCollection de li(s)\n  // Quiero encontrar los elemetos de filteredCharacters(array de objetos character) que estan en favCharacters(array de objetos character)\n\n  const filteredChildren = allList.children;\n\n  // const favListLi = favList.childNodes;\n  // const favListLiArr = Array.prototype.slice.call(favListLi);\n  const eachFav = document.querySelector(\".fav\");\n  // let findSearch = [];\n  for (let i = 0; i < filteredChildren.length; i++) {\n    filteredChildren[i].addEventListener(\"click\", handleClickFav);\n\n    //Article de cada elemento de la lista de filtrados\n    const eachFiltered = filteredChildren[i].firstChild;\n    console.log(eachFiltered);\n\n    if (favCharacters !== null && favCharacters !== []) {\n      //Esto da el array de objetos de la lista de filtered que tenga un id igual a los que están en favoritos\n      const findSearchIndex = favCharacters.findIndex(\n        (eachChar) => eachChar.char_id == parseInt(eachFiltered.id)\n      );\n      console.log(findSearchIndex);\n\n      //Comprobar si el objeto estaba en el Array\n      if (findSearchIndex !== -1) {\n        eachFiltered.classList.add(\"favsCharacters__list--article\");\n      } else {\n        eachFiltered.classList.add(\"characters__back\");\n      }\n    }\n  }\n}\n\nsearchBtn.addEventListener(\"click\", handleClickSearch);\n","\"use strict\";\nlet favCharacters = [];\n\nfunction paintFav(ev) {\n  let favElement = ev.target.parentElement;\n  favElement.classList.add(\"favsCharacters__list--article\");\n\n  //Encontrar el objeto según el click que haga\n  const findFav = characters.find(\n    (eachChar) => eachChar.char_id == parseInt(favElement.id)\n  );\n\n  //Encontrar la posición del objeto en el que he hecho click en el array\n  const isFavIndex = favCharacters.findIndex(\n    (eachFav) => eachFav.char_id == parseInt(favElement.id)\n  );\n\n  //Comprobar si el objeto NO estaba en el array y añadirlo o quitarlo si SÍ estaba\n  if (isFavIndex === -1) {\n    favCharacters.push(findFav);\n  } else {\n    favCharacters.splice(isFavIndex, 1);\n    favElement.classList.remove(\"favsCharacters__list--article\");\n  }\n\n  updateFavList();\n}\n\nfunction updateFavList() {\n  favList.innerHTML = \"\";\n  console.log(favCharacters, \"Estoy aquí\");\n  if (favCharacters.length === 0 || favCharacters === null) {\n    favSection.classList.add(\"hidden\");\n    favSection.classList.remove(\"favsCharacters\");\n    container.classList.remove(\"main\");\n    removeLocalSt();\n    console.log(\"Esto es el if\");\n  } else {\n    favSection.classList.remove(\"hidden\");\n    favSection.classList.add(\"favsCharacters\");\n    paintCharacters(favCharacters, favList, \"favsCharacters__list--articleBtn\");\n    console.log(favCharacters.length);\n    styleFav();\n    setLocalSt();\n    console.log(\"Esto es el else\");\n  }\n}\n\nfunction styleFav() {\n  container.classList.add(\"main\");\n  const favArticles = document.querySelectorAll(\n    \".favsCharacters__list--articleBtn\"\n  );\n  // console.log(favArticles);\n  for (const favArticle of favArticles) {\n    const removeFavBtn = document.createElement(\"p\");\n    removeFavBtn.classList.add(\"removeFav\");\n    removeFavBtn.addEventListener(\"click\", handleClickRemove);\n    const removeFavText = document.createTextNode(\"X\");\n    removeFavBtn.appendChild(removeFavText);\n    favArticle.appendChild(removeFavBtn);\n  }\n}\n\nfunction handleClickRemove(ev) {\n  ev.preventDefault();\n  const isFavIndex = favCharacters.findIndex(\n    (eachFav) => eachFav.char_id == parseInt(ev.target.parentElement.id)\n  );\n  favCharacters.splice(isFavIndex, 1);\n\n  const allLi = allList.children;\n  const allLiArr = Array.prototype.slice.call(allLi);\n\n  const oldFavCharacterLi = allLiArr.find(\n    (eachLi) => eachLi.firstChild.id == parseInt(ev.target.parentElement.id)\n  );\n  oldFavCharacterLi.firstChild.classList.remove(\"favsCharacters__list--article\");\n\n  updateFavList();\n}\n\nfunction handleClickFav(ev) {\n  ev.preventDefault();\n  paintFav(ev);\n}\n\ncreateReset();\n","\"use strict\";\n\nlet favsLocal = JSON.parse(localStorage.getItem(\"favChars\"));\n\nfunction setLocalSt() {\n  localStorage.setItem(\"favChars\", JSON.stringify(favCharacters));\n}\nfunction removeLocalSt() {\n  localStorage.removeItem(\"favChars\");\n}\n\nfunction paintLocalSt() {\n  if (favsLocal !== null && favsLocal !== []) {\n    favSection.classList.remove(\"hidden\");\n    favSection.classList.add(\"favsCharacters\");\n    favCharacters = favsLocal;\n    paintCharacters(favsLocal, favList, \"favsCharacters__list--articleBtn\");\n    styleFav();\n\n    const allCharactersLi = allList.children;\n    // const allLiArr = Array.prototype.slice.call(allLi);\n\n    for (let i = 0; i < allCharactersLi.length; i++) {\n      const eachArticle = allCharactersLi[i].firstChild;\n      console.log(eachArticle);\n      //Esto da el array de objetos de la lista de filtered que tenga un id igual a los que están en favoritos\n      const findArticleIndex = favCharacters.findIndex(\n        (eachChar) => eachChar.char_id == parseInt(eachArticle.id)\n      );\n\n      //Comprobar si el objeto estaba en el Array\n      if (findArticleIndex !== -1) {\n        eachArticle.classList.add(\"favsCharacters__list--article\");\n      }\n    }\n  }\n}\n","function createReset() {\n  const resetBtn = document.createElement(\"button\");\n  const resetText = document.createTextNode(\"Delete All\");\n  resetBtn.appendChild(resetText);\n  resetBtn.classList.add(\"resetBtn\");\n  favSection.appendChild(resetBtn);\n  resetBtn.addEventListener(\"click\", handleClickReset);\n}\n\nfunction handleClickReset() {\n  favCharacters = [];\n  favList.innerHTML = \"\";\n  favSection.classList.add(\"hidden\");\n  favSection.classList.remove(\"favsCharacters\");\n  container.classList.remove(\"main\");\n  removeLocalSt();\n\n  for (const eachLi of allList.children) {\n    eachLi.firstChild.classList.remove(\"favsCharacters__list--article\");\n  }\n}\n","\"use strict\";\nlet characters = [];\n\nfunction paintCharacters(charactersData, list, className) {\n  for (let i = 0; i < charactersData.length; i++) {\n    const liElement = document.createElement(\"li\");\n    const articleElement = document.createElement(\"article\");\n    articleElement.classList.add(className);\n    articleElement.setAttribute(\"id\", `${charactersData[i].char_id}`);\n\n    const imgElement = document.createElement(\"img\");\n    articleElement.appendChild(imgElement);\n    const titleElement = document.createElement(\"h2\");\n    articleElement.appendChild(titleElement);\n    const textElement = document.createElement(\"p\");\n    articleElement.appendChild(textElement);\n\n    liElement.appendChild(articleElement);\n    list.appendChild(liElement);\n\n    const nameText = document.createTextNode(`${charactersData[i].name}`);\n    titleElement.appendChild(nameText);\n\n    imgElement.src = `${charactersData[i].img}`;\n    imgElement.alt = `Photo of ${charactersData[i].name}`;\n    imgElement.style.height = \"150px\";\n    imgElement.style.width = \"110px\";\n\n    const statusText = document.createTextNode(`${charactersData[i].status}`);\n    textElement.appendChild(statusText);\n  }\n}\n\nfunction getCharacters() {\n  fetch(\"https://breakingbadapi.com/api/characters\")\n    .then((response) => response.json())\n    .then((data) => {\n      characters = data;\n      paintCharacters(data, allList, \"allCharacters__list--article\");\n      const allListChildren = allList.children;\n      for (let i = 0; i < allListChildren.length; i++) {\n        allListChildren[i].addEventListener(\"click\", handleClickFav);\n      }\n      paintLocalSt();\n    });\n}\n\n// Al cargar la página\ngetCharacters();\n"]}